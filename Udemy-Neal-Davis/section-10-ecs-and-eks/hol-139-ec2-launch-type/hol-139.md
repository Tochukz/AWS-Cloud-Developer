# Create an ECS Cluster with EC2 Launch Type - HOL-139

### Description

This configuration creates an ECS Cluster which supports an EC2 Launch Type.  
We than create an EC2 Instance and have the instance added to the ECS cluster.

### Operation

**Before deployment**

**Deployment**

Lint the templates

```bash
$ cfn-lint Ec2LaunchType.yaml
```

Deploy the stack

```bash
$ aws cloudformation deploy --template-file Ec2LaunchType.yaml --stack-name Ec2LaunchType  --capabilities CAPABILITY_NAMED_IAM --parameter-overrides file://private-parameters.json
```

**After deployment**

**Testing**

1. Go to the ECS Console > Cluster > Select our newly created SimpleCluster cluster
2. Click on the Infrastrcture tab, you should find the EC2 instance under the _Container Instances_ table
3. It might take a few minutes for the EC2 instance to appear.

**Cleanup**

To delete the stack

```bash
$ aws cloudformation delete-stack --stack-name Ec2LaunchType
```
