# Create Pipeline and Application - HOL-152

### Description

### Operation

**Before deployment**
Package the application code and upload to S3 bucket for the BeanStalk Application.

```bash
$ bash ./deploy.sh
```

**Deployment**

Lint the templates

```bash
$ cfn-lint BeanstalkApp
 cfn-lint Pipeline.yaml
```

1. Deploy the `BeanstalkApp` stacks

```bash
$ aws cloudformation deploy --stack-name BeanStalkApp --template-file BeanStalkApp.yaml --capabilities CAPABILITY_NAMED_IAM
```

2. Deploy the `Pipeline` stack

```bash
$ aws cloudformation deploy --stack-name Pipeline --template-file Pipeline.yaml --capabilities CAPABILITY_NAMED_IAM --parameter-overrides file://secret-parameters.json
```

**After deployment**

Get the Environment URL and Environment IP from the stack outputs

```bash
$ aws cloudformation describe-stacks --stack-name BeanStalkApp --query "Stacks[0].Outputs" --no-cli-pager
```

**Testing**  
.

**Cleanup**
To delete the stacks

```bash
$ aws cloudformation delete-stack --stack-name Pipeline
$ aws cloudformation delete-stack --stack-name BeanStalkApp
```
